# STL基础

[C语言中文网 - C++ STL基础](http://c.biancheng.net/view/6557.html)

## 什么是STL？

STL 是 `Standard Template Library` 的缩写，即**标准模板库**或**泛型库**。其中包含有大量的模板类和模板函数，是C++提供的一个基础模板的集合，用于完成诸如输入/输出、数学计算等功能。

STL 是C++的一部分，不用单独安装。STL 就位于各个C++的头文件中，是以源代码的形式提供的。

从根本上说，STL是一些容器、算法和其他一些组件的集合，所有容器和算法都是总结了几十年来算法和数据结构的研究成果，汇集了许多计算机专家学者经验的基础上实现的，因此可以说，STL基本上达到了各种存储方法和相关算法的高度优化。



## STL的作用

为了显示STL的优势，这里以C++定义数组为例。



**静态方式定义一个数组**：

```c++
int a[n];
// n必须为常量，且需要事先定义好数组的长度
```



或者，可以**在堆空间动态申请空间**：

```c++
int *p = new int[n];
// 可根据变量n动态申请内存
```

但是，如果程序执行过程中出现空间不足，需要加大存储空间，要进行如下操作：

```c++
// 新申请一个较大的内存空间
int* temp = new int[m];

// 将原内存空间的数据全部复制到新申请的内存空间中
memecopy(temp, p, sizeof(int)*n);

// 将原来的堆空间释放
delete []p;
p = temp;
```



若**采用STL标准库**，则会简单很多，如使用 vector 实现上述功能：

```c++
// 定义一个数组a，该数组可以根据存储的数量自动变长
vector<int> a;

// 向数组中添加10个元素
for(int i = 0; i < 10; i++) {
    a.push_back(i);
}

// 手动调整数组大小
a.resize(100);
a[90] = 100;

// 删除数组中所有元素
a.clear();

// 重新调整数组的大小，并存储20个-1
a.resize(20, -1);
```



## STL的组成

### 6个部分

STL由 容器、算法、迭代器、函数对象、适配器、内容分配器这六个部分构成的，后四个部分是为前两个部分服务的。

| 组成       | 含义                                                         |
| ---------- | ------------------------------------------------------------ |
| 容器       | 一些封装数据结构的模板类，例如 vector 向量容器、list列表容器等。 |
| 算法       | STL提供了大约100个的数据结构算法，它们都被设计成一个个的模板函数，这些算法在 `std`命名空间中被定义，其中大部分算法包含在头文件 `<algorithm>` 中，少部分包含在头文件 `<numeric>` 中。 |
| 迭代器     | 对容器中数据的读和写，是通过迭代器完成的，扮演着容器和算法之间的胶合剂。 |
| 函数对象   | 如果一个类将 () 运算符重载为成员函数，这个类就称为函数对象类，这个类的对象就是函数对象。（又称仿函数） |
| 适配器     | 可以使一个类的接口（模板的参数）适配成用户指定的形式，从而让原本不能在一起工作的两个类工作在一起。 |
| 内存分配器 | 为容器类模板提供自定义的内存申请和释放功能，由于往往只有高级用户才有改变内存分配策略的需求，因此内存分配器对于一般用户来说，并不常用。 |



### 13个头文件

| 1    | <iterator>   |
| ---- | ------------ |
| 2    | <functional> |
| 3    | <vector>     |
| 4    | <deque>      |
| 5    | <list>       |
| 6    | <queue>      |
| 7    | <stack>      |
| 8    | <set>        |
| 9    | <map>        |
| 10   | <algorithm>  |
| 11   | <numeric>    |
| 12   | <memory>     |
| 13   | <utility>    |

